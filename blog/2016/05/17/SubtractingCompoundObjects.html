<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Subtracting Compound Objects</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
    <meta name="description" content="Quick!
How many days between ``2014-11-29`` and ``..." />
    <meta name="keywords" content="programming, til" />
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start" title="George's full blog">blog</a></li>
        <li><a href="/til/" rel="home start" title="Today George Learned">TIL</a></li>
        <li><a href="/about/" rel="home start" title="About George">about</a></li>
        <li><a href="/atom/" rel="alternate" title="Atom Feed">atom</a></li>
        <li><a href="/rss/" rel="alternate" title="RSS Feed">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
        <li><a href="/tags/" rel="contents">tags</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2016-05-17">2016-05-17</time>
        <h1>
            <a href="/blog/2016/05/17/SubtractingCompoundObjects.html" rel="bookmark canonical">Subtracting Compound Objects</a>
        </h1>
    </header>
    <p>Quick!
How many days between <tt class="docutils literal"><span class="pre">2014-11-29</span></tt> and <tt class="docutils literal"><span class="pre">2016-05-17</span></tt>?
What&#8217;s the angle between the hour hand and the minute hand on an analog clock
when the time reads&nbsp;11:37?</p>
<p>The hard way to compute the difference between the two dates
is to start counting back months and days until you reach the earlier date,
or equiv&shy;a&shy;lent&shy;ly to count forward from the beginning.
(Don&#8217;t forget that Feb 2016 has 29 days but Feb 2015 has 28.)
Similarly with the angle between the&nbsp;hands.</p>
<p>The easier way is to compute the number of units between the first point
and some reference (or base) point,
to do the same for the second point,
and to subtract the two&nbsp;numbers.</p>
<p>Say the base date is <tt class="docutils literal"><span class="pre">2000-01-01</span></tt>.
The first date, <tt class="docutils literal"><span class="pre">2014-11-29</span></tt> is 14 years since the base date,
and 2000, 2004, 2008, and 2012 are leap years,
so 365×14 + 4 + 31 + 28 + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 29 = 5,447 days.
The second date, <tt class="docutils literal"><span class="pre">2016-05-17</span></tt>, is
365×16 + 4 + 31 + 29 + 31 + 30 + 17 = 5,982 days since 2000-01-01.
(Four not five leap years, since 2016 is incomplete and Feb 29 is counted.)
The difference is 535&nbsp;days.</p>
<p>All modern date libraries have some notion of an epoch;
typically <tt class="docutils literal"><span class="pre">1970-01-01T00:00:00Z</span></tt> is zero seconds.
Compute the number of seconds since the epoch for both dates, then subtract,
and divide the remainder by 24×60×60.
Note: this does not take daylight savings into account,
when certain days are 23 or 25 hours long.
However, a decent date library will handle all of&nbsp;this.</p>
<p>I learned this trick from Charles Bryant circa 1984 on Vax Pascal.
I don&#8217;t believe there was a date library;
we just stored the year/month/day in a custom Pascal&nbsp;record.</p>

    <footer>
        
        
            <p>tagged as
                <a href="/tag/programming/" rel="tag">programming</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'georgevreilly'; // required: replace example with your forum shortname

            // The following are highly recommended additional parameters. Remove the slashes in front to use.
            var disqus_identifier = "https://www.georgevreilly.com/blog/2016/05/17/SubtractingCompoundObjects.html";
            var disqus_url = "https://www.georgevreilly.com/blog/2016/05/17/SubtractingCompoundObjects.html";

            if (window.location.hostname != "localhost") {
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            }
        </script>
        <noscript>
            <p>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></p>
        </noscript>
        <a href="https://disqus.com" class="dsq-brlink">
            blog comments powered by <span class="logo-disqus">Disqus</span>
        </a>
        </div>
</article>


    
    
        <a href="/blog/2016/05/16/ToastmastersTransitions.html" class="page floatright">
        Toastmasters Transitions &raquo;
        </a>
    
    
        <a href="/blog/2016/05/18/ReviewThePointOfDeath.html" class="page floatleft">
        &laquo; Review: The Point of Death
        </a>
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="copyright license">
        <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="by-nc-sa" />
    </a>
    <script data-goatcounter="https://georgevreilly.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
    
    

  </footer>
</body>
</html>
