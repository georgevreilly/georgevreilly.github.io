<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>George V. Reilly</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start" title="George's full blog">blog</a></li>
        <li><a href="/til/" rel="home start" title="Today George Learned">TIL</a></li>
        <li><a href="/about/" rel="home start" title="About George">about</a></li>
        <li><a href="/atom/" rel="alternate" title="Atom Feed">atom</a></li>
        <li><a href="/rss/" rel="alternate" title="RSS Feed">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
        <li><a href="/tags/" rel="contents">tags</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2016-07-12">2016-07-12</time>
        <h1>
            <a href="/blog/2016/07/12/PythonJoiningUrlsWithPosixpathJoin.html" rel="bookmark canonical">Python: Joining URLs with posixpath.join</a>
        </h1>
    </header>
    <p>On Mac/Linux, <a class="reference external" href="https://docs.python.org/2/library/os.path.html#os.path.join">os.path.join</a> is an alias for <tt class="docutils literal">posixpath.join</tt>,
which always joins path segments with <tt class="docutils literal">/</tt>.
On Windows, <tt class="docutils literal">os.path.join</tt> is an alias for <tt class="docutils literal">ntpath.join</tt>,
which always uses <tt class="docutils literal">\</tt>.
When dealing with URLs, we always want forward slashes,
regardless of platform, so <tt class="docutils literal">posixpath.join</tt> should be used to build <span class="caps">URL</span> paths.</p>
<p>Running:</p>
<pre class="code python literal-block">
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="kn">from</span> <span class="nn">six.moves.urllib_parse</span> <span class="kn">import</span> <span class="n">urljoin</span> <span class="k">as</span> <span class="n">abs_urljoin</span>
<span class="kn">from</span> <span class="nn">posixpath</span> <span class="kn">import</span> <span class="n">join</span> <span class="k">as</span> <span class="n">path_urljoin</span>

<span class="k">def</span> <span class="nf">urljoin</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">abs_urljoin</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_join</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"'</span><span class="si">{0}</span><span class="s2">' + '</span><span class="si">{1}</span><span class="s2">'</span><span class="se">\n\t</span><span class="s2">-> '</span><span class="si">{2}</span><span class="s2">'"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">result</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="n">local_path</span> <span class="o">=</span> <span class="n">path_urljoin</span><span class="p">(</span><span class="s1">'2016'</span><span class="p">,</span> <span class="s1">'07'</span><span class="p">,</span> <span class="s1">'12'</span><span class="p">,</span> <span class="s1">'release'</span><span class="p">,</span> <span class="s1">'index.html'</span><span class="p">)</span>

<span class="n">test_join</span><span class="p">(</span><span class="s1">'https://www.example.com'</span><span class="p">,</span> <span class="s1">'foo/bar/quux.js'</span><span class="p">)</span>
<span class="n">test_join</span><span class="p">(</span><span class="s1">'https://www.example.com'</span><span class="p">,</span> <span class="n">local_path</span><span class="p">)</span>
<span class="n">test_join</span><span class="p">(</span><span class="s1">'https://www.example.com/'</span><span class="p">,</span> <span class="n">local_path</span><span class="p">)</span>
<span class="n">test_join</span><span class="p">(</span><span class="s1">'https://www.example.com/prefix'</span><span class="p">,</span> <span class="n">local_path</span><span class="p">)</span>
</pre>
<p>Yields:</p>
<pre class="literal-block">
'https://www.example.com' + 'foo/bar/quux.js'
   </pre><span>&#8230;<a href="/blog/2016/07/12/PythonJoiningUrlsWithPosixpathJoin.html" class="continue">continue</a>.</span>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/12/PythonJoiningUrlsWithPosixpathJoin.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-11">2016-07-11</time>
        <h1>
            <a href="/blog/2016/07/11/LoggingInPythonDontUseNew-FangledFormat.html" rel="bookmark canonical">Logging in Python: Don't use new-fangled format</a>
        </h1>
    </header>
    <p>Python 2.6 introduced the <a class="reference external" href="https://pyformat.info/">format method</a> to strings.
In general, <tt class="docutils literal">format</tt> is now the preferred way to build strings
instead of the old <tt class="docutils literal">%</tt> formatting operator.</p>
<p>One exception is with the <tt class="docutils literal">logging</tt> module,
where the best practice is to use <tt class="docutils literal">%s</tt> and <tt class="docutils literal">%d</tt>.
Why?
First, <tt class="docutils literal">%s</tt> is the idiomatic way to use <tt class="docutils literal">logging</tt>,
which was built years before <tt class="docutils literal">format</tt> was introduced.
Second, if there’s a literal <tt class="docutils literal">%</tt> in the in­ter­po­lat­ed values,
<tt class="docutils literal">logging</tt> will be unhappy,
since there won’t be cor­re­spond­ing arguments in the call.
It won’t fall over, since
“The logging package is designed to swallow exceptions which occur while logging in production.
This is so that errors which occur while handling logging events
- <span>&#8230;<a href="/blog/2016/07/11/LoggingInPythonDontUseNew-FangledFormat.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/11/LoggingInPythonDontUseNew-FangledFormat.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-10">2016-07-10</time>
        <h1>
            <a href="/blog/2016/07/10/ReviewFlashmanAndTheMountainOfLight.html" rel="bookmark canonical">Review: Flashman and the Mountain of Light</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://www.amazon.com/dp/0452267854/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Flashman and the Mountain of Light</div>
<div class="line">Author: George MacDonald Fraser</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Publisher: Plume</div>
<div class="line">Copyright: 1990</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="https://www.amazon.com/dp/0452267854/?tag=georgvreill-20">0452267854</a></div>
<div class="line">Pages: 368</div>
<div class="line">Keywords: historical fiction, humor</div>
<div class="line">Reading period: 29 June–10 July, 2016</div>
<div class="line"><a class="reference external" href="https://en.wikipedia.org/wiki/The_Flashman_Papers">Flashman Papers</a> <span class="caps">IX</span>: 1845–46</div>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Flashman_and_the_Mountain_of_Light">Flashman and the Mountain of Light</a> takes place just after <a class="reference external" href="/blog/2016/07/05/ReviewFlashmansLady.html">Flashman’s Lady</a>,
and it also falls between the two parts of <a class="reference external" href="/blog/2016/06/26/ReviewRoyalFlash.html">Royal Flash</a>,
making it the fourth book chrono­log­i­cal­ly of the <a class="reference external" href="https://en.wikipedia.org/wiki/The_Flashman_Papers">Flashman Papers</a>
and the ninth book published.</p>
<p>In the prologue,
our hero finds himself telling Queen Victoria
a much-edited version of how he came to acquire the <a class="reference external" href="https://en.wikipedia.org/wiki/Koh-i-Noor">Koh-i-Noor</a> diamond
on the crown’s behalf forty years earlier during the
<a class="reference external" href="https://en.wikipedia.org/wiki/First_Anglo-Sikh_War">First Anglo-Sikh War</a>.
The <em>actual</em> story—at least according to Flashman and Fraser—is that <span>&#8230;<a href="/blog/2016/07/10/ReviewFlashmanAndTheMountainOfLight.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/10/ReviewFlashmanAndTheMountainOfLight.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/books/" rel="tag">books</a>,
                <a href="/tag/reviews/" rel="tag">reviews</a>,
                <a href="/tag/fiction/" rel="tag">fiction</a>,
                <a href="/tag/history/" rel="tag">history</a>
                    and
                    
                <a href="/tag/humor/" rel="tag">humor</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-09">2016-07-09</time>
        <h1>
            <a href="/blog/2016/07/09/BlackLivesMatterAltonPhilandoAndDallas.html" rel="bookmark canonical">Black Lives Matter: Alton, Philando, and Dallas</a>
        </h1>
    </header>
    <p>What an awful week for race relations in the United States of America.
On Monday night, Alton Sterling was shot and killed by Baton Rouge police.
One night later, Philando Castile was shot and killed by police in Minnesota.
Both men were black and neither was resisting arrest.
Both shootings were caught on video, which inflamed passions.
On Thursday night at a peaceful rally in Dallas protesting police violence,
two snipers killed five police officers and wounded seven others.
Micah Johnson was later killed by police in a standoff;
three others were arrested.</p>
<p>The police should not have killed Alton Sterling or Philando Castile—or Tamir Rice or Freddie Gray or <span>&#8230;<a href="/blog/2016/07/09/BlackLivesMatterAltonPhilandoAndDallas.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/09/BlackLivesMatterAltonPhilandoAndDallas.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/politics/" rel="tag">politics</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-08">2016-07-08</time>
        <h1>
            <a href="/blog/2016/07/08/TeatroZinzanni.html" rel="bookmark canonical">Teatro Zinzanni</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://zinzanni.com/seattle/"></a>
<p>Teatro Zinzanni is a long-running circus dinner theater in Seattle.
Six of us went tonight and enjoyed
a blend of cabaret, circus arts, fine dining, and vaudeville.</p>
<p>The current show, Hotel L’Amour, is ostensibly set in a fine hotel,
where the oc­to­ge­nar­i­an Madame reminisces about her career,
while Caesar the lounge lizard hams it up,
Maestro Voronin brings a puppet girl to life,
one aerialist cavorts around an enormous martini glass,
a juggler dazzles with his ver­sa­til­i­ty,
another aerialist works the straps,
and the soprano trills.
All this while the audience eats a fairly decent meal spread out over three hours.</p>
<p>‘Twas enjoyable to be sure and the acts were good
but it was hard <span>&#8230;<a href="/blog/2016/07/08/TeatroZinzanni.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/08/TeatroZinzanni.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/seattle/" rel="tag">seattle</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-07">2016-07-07</time>
        <h1>
            <a href="/blog/2016/07/07/ReviewTheTailorOfPanama.html" rel="bookmark canonical">Review: The Tailor of Panama</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://en.wikipedia.org/wiki/The_Tailor_of_Panama_(film)"></a>
<div class="line-block">
<div class="line">Title: The Tailor of Panama</div>
<div class="line">Director: John Boorman</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Released: 2001</div>
<div class="line">Keywords: spy thriller, satire</div>
<div class="line">Watched: 7 July, 2016</div>
</div>
<p>Andy Osnard (Pierce Brosnan) is a disgraced <span class="caps">MI6</span> officer, packed off to Panama,
where he recruits Harry Pendel (Geoffrey Rush), the eponymous tailor.
Osnard is an un­scrupu­lous dirtbag;
Pendel is a fabulist in need of money;
they’re made for each other.
Panama is “Casablan­ca without the heroes”
and Pendel spins tall tales that make their way back to London.
Eventually, he outdoes himself, claiming that the Canal is to be sold to the Chinese.
Osnard manages to procure $15 million to fund a revolution,
which he plans to abscond with.</p>
<p>Brosnan plays against type <span>&#8230;<a href="/blog/2016/07/07/ReviewTheTailorOfPanama.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/07/ReviewTheTailorOfPanama.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/movies/" rel="tag">movies</a>
                    and
                    
                <a href="/tag/reviews/" rel="tag">reviews</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-06">2016-07-06</time>
        <h1>
            <a href="/blog/2016/07/06/BashBulkRenaming.html" rel="bookmark canonical">Bash: Bulk Renaming</a>
        </h1>
    </header>
    <p>I had to rename several hundred thousand files today.
Thanks to a botched invocation of Im­ageMag­ick,
they all looked like <tt class="docutils literal">unique_pre­fix.png.jpg</tt>,
whereas we simply wanted <tt class="docutils literal">unique_pre­fix.jpg</tt>.</p>
<p>I found a <a class="reference external" href="http://unix.stackexchange.com/a/102653/4060">suitable answer at the Unix Stack­Ex­change</a>.
As one of the many variants of <a class="reference external" href="http://tldp.org/LDP/abs/html/parameter-substitution.html">parameter sub­sti­tu­tion</a>,
Bash supports <tt class="docutils literal">${var/Pattern/Re­place­men­t}</tt>:
“first match of <tt class="docutils literal">Pattern</tt> within <tt class="docutils literal">var</tt> replaced with <tt class="docutils literal">Re­place­ment</tt>.”</p>
<pre class="code bash literal-block">
<span class="k">for</span> f <span class="k">in</span> *.png.jpg<span class="p">;</span>
<span class="k">do</span>
    mv <span class="nv">$f</span> <span class="s2">"</span><span class="si">${</span><span class="nv">f</span><span class="p">/.png</span><span class="si">}</span><span class="s2">"</span>
<span class="k">done</span>
</pre>
<p>The target expression could also have been written as <tt class="docutils literal"><span class="pre">"${f/.png.jpg/.jpg}"</span></tt></p>

    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/06/BashBulkRenaming.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/bash/" rel="tag">bash</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-05">2016-07-05</time>
        <h1>
            <a href="/blog/2016/07/05/ReviewFlashmansLady.html" rel="bookmark canonical">Review: Flashman's Lady</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://www.amazon.com/dp/0452264898/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Flashman’s Lady</div>
<div class="line">Author: George MacDonald Fraser</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Publisher: Plume</div>
<div class="line">Copyright: 1977</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="https://www.amazon.com/dp/0452264898/?tag=georgvreill-20">0452264898</a></div>
<div class="line">Pages: 330</div>
<div class="line">Keywords: historical fiction, humor</div>
<div class="line">Reading period: 24–29 June, 2016</div>
<div class="line"><a class="reference external" href="https://en.wikipedia.org/wiki/The_Flashman_Papers">Flashman Papers</a> <span class="caps">VI</span>: 1842–45</div>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Flashman%27s_Lady">Flashman’s Lady</a> takes place between the two parts of <a class="reference external" href="/blog/2016/06/26/ReviewRoyalFlash.html">Royal Flash</a>,
making it the third book chrono­log­i­cal­ly of the <a class="reference external" href="https://en.wikipedia.org/wiki/The_Flashman_Papers">Flashman Papers</a>
and the sixth book published.</p>
<p>Flashman and his wife, Elspeth, become friendly with Don Solomon Haslam,
a rich merchant from the East Indies.
Losing a wager to Haslam, who is smitten with Elspeth,
Flashy has to let Haslam take Elspeth and her father on a trip to Singapore.
As things have become hot for him in England, he sails east with them.
Haslam’s feelings for <span>&#8230;<a href="/blog/2016/07/05/ReviewFlashmansLady.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/05/ReviewFlashmansLady.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/books/" rel="tag">books</a>,
                <a href="/tag/reviews/" rel="tag">reviews</a>,
                <a href="/tag/fiction/" rel="tag">fiction</a>,
                <a href="/tag/history/" rel="tag">history</a>
                    and
                    
                <a href="/tag/humor/" rel="tag">humor</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-04">2016-07-04</time>
        <h1>
            <a href="/blog/2016/07/04/IndependenceDay.html" rel="bookmark canonical">Independence Day</a>
        </h1>
    </header>
    
<p>I have an ambivalent relation to the notion of patriotism
because all too often those who most loudly proclaim themselves to be patriots
are the worst sort of jingoistic, know-nothing, blowhard­s—be they Trump supporters, Brexiters, or Irish na­tion­al­ists.</p>
<p>And yet, for all the flaws and failures of the American Experiment,
there are still things to celebrate.
America’s optimism and can-do spirit,
although much abraded in recent years, is still exemplary.
Millions continue to flock here, drawn to the land of op­por­tu­ni­ty.
The Founding Fathers created a great and lasting democracy,
albeit with a franchise and a set of rights that had to be widened several times.
The world can’t get enough <span>&#8230;<a href="/blog/2016/07/04/IndependenceDay.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/04/IndependenceDay.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/usa/" rel="tag">usa</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-07-03">2016-07-03</time>
        <h1>
            <a href="/blog/2016/07/03/SSDUpgradeFor2012MacBook.html" rel="bookmark canonical">SSD Upgrade for 2012 MacBook</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://eshop.macsales.com/shop/internal_storage/Data_Doubler"></a>
<p>My mid-2012 15" MacBook Pro has been getting ever slower.
My last two work laptops came with SSDs, but this older machine has a <span class="caps">768GB</span> hard disk drive.
It was time to get a solid-state drive, which are far more affordable now than four years ago.
Rather than replace the <span class="caps">HDD</span>, I bought a <a class="reference external" href="https://eshop.macsales.com/shop/internal_storage/Data_Doubler">Data Doubler</a> kit and a <span class="caps">480GB</span> <span class="caps">SSD</span>.
I removed the optical drive and installed the Data Doubler with <span class="caps">SSD</span> in that space.
I rarely used the <span class="caps">DVD</span> drive, so I won’t miss it.</p>
<p>The Data Doubler kit came with a set of screw­drivers and
a detailed manual that covered multiple MacBook models.
The manual had <span>&#8230;<a href="/blog/2016/07/03/SSDUpgradeFor2012MacBook.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="https://www.georgevreilly.com/blog/2016/07/03/SSDUpgradeFor2012MacBook.html#disqus_thread">Comment</a>
        
        
            <p>tagged as
                <a href="/tag/mac/" rel="tag">mac</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
    
        <a href="/blog/page/13/" class="page floatright">
        Previous &raquo;
        </a>
    
    
        <a href="/blog/page/11/" class="page floatleft">
        &laquo; Next
        </a>
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="copyright license">
        <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="by-nc-sa" />
    </a>
    
    
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'georgevreilly'; // required: replace example with your forum shortname
            if (window.location.hostname != 'localhost') {
                 /* * * DON'T EDIT BELOW THIS LINE * * */
                (function () {
                    var s = document.createElement('script'); s.async = true;
                    s.type = 'text/javascript';
                    s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
                    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);}());
            }
        </script>
        

  </footer>
</body>
</html>
