<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>George V. Reilly</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start">blog</a></li>
        <li><a href="/about/" rel="home start">about</a></li>
        <li><a href="/atom/" rel="alternate">atom</a></li>
        <li><a href="/rss/" rel="alternate">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2017-01-19">2017-01-19</time>
        <h1>
            <a href="/blog/2017/01/19/BashEchoSuccessOfPreviousCommand.html" rel="bookmark canonical">Bash: echo success of previous command</a>
        </h1>
    </header>
    <p>C-like languages have a ternary operator,
<tt class="docutils literal">cond ? true_re&shy;sult : false_re&shy;sult</tt>.
Python has <tt class="docutils literal">true_re&shy;sult if cond else false_re&shy;sult</tt>.
Bash doesn&#8217;t have a ternary operator, but there are <a class="reference external" href="http://stackoverflow.com/a/3953712/6364">various workarounds</a>.</p>
<p>I wanted to print <tt class="docutils literal">succeeded</tt> or <tt class="docutils literal">failed</tt>
based on the exit code of the previous command
in a shell script.
In Unix, all programs exit with an integer status code.
Successful programs exit with <tt class="docutils literal">0</tt>;
all other values, positive or negative, indicate <a class="reference external" href="http://www-numi.fnal.gov/offline_software/srt_public_context/WebDocs/Errors/unix_system_errors.html">failure</a>.
In Bash, the <a class="reference external" href="http://tldp.org/LDP/abs/html/exit-status.html">status code</a> of the previous program is held in <tt class="docutils literal">$?</tt>.</p>
<div class="highlight"><pre><span></span>some/command or-other fer example

<span class="nv"><span class="caps">STATUS</span></span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$?</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s1">&#39;succeeded&#39;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s1">&#39;failed&#39;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Results: </span><span class="nv">$<span class="caps">STATUS</span></span><span class="s2">&quot;</span>
</pre></div>
<p>There are <a class="reference external" href="http://stackoverflow.com/a/3953712/6364">other ways</a> to handle&nbsp;this.</p>

    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/19/BashEchoSuccessOfPreviousCommand.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-18">2017-01-18</time>
        <h1>
            <a href="/blog/2017/01/18/Movember2016.html" rel="bookmark canonical">Movember 2016</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://mobro.co/georgevreilly"></a>
<p>I&#8217;ve worn a beard since 1986, when I was 21.
Only rarely have I been clean&shy;shaven since then.
Emma, who met me in 1997,
has only seen me clean&shy;shaven once before,
about 15 years ago.
I promptly regrew the beard that&nbsp;time.</p>
<p>I decided in October to fundraise for <a class="reference external" href="http://mobro.co/georgevreilly">Movember</a>.
In truth, I was also curious to see
what I looked like without my trademark beard.
On Halloween night, I shaved everything off.
Interim photos as I whittled down the beard
can be seen below,
as can some progress photos taken since then
as I grew an over-the-top handlebar&nbsp;mustache.</p>
<p>I&#8217;ve let the rest of the beard start growing in
after my heel operation a week and <span>&#8230;<a href="/blog/2017/01/18/Movember2016.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/18/Movember2016.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-17">2017-01-17</time>
        <h1>
            <a href="/blog/2017/01/17/KneeWalker.html" rel="bookmark canonical">Knee Walker</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.eastsidelegup.com/"></a>
<p>I had heel surgery last week
to remove a heel spur which was causing tendonitis
and to repair the Achilles tendon.
More on that some other&nbsp;time.</p>
<p>I rented a knee walker this morning from <a class="reference external" href="http://www.eastsidelegup.com/">Eastside Leg Up</a>.
I love it!
After barely getting around with crutches for a week,
the scooter makes a <em>huge</em> difference.
I can move around at normal walking pace now,
instead of wearing myself out with the&nbsp;crutches.</p>
<p>In&shy;ci&shy;den&shy;tal&shy;ly, I found my first <a class="reference external" href="https://en.wikipedia.org/wiki/WebP">WebP</a> image in the wild:
the original of the image that&#8217;s shown here.
I used Im&shy;ageMag&shy;ick <tt class="docutils literal">convert</tt> to make it into a&nbsp;<span class="caps">JPEG</span>.</p>

    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/17/KneeWalker.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-16">2017-01-16</time>
        <h1>
            <a href="/blog/2017/01/16/ReviewTheAtrocityArchives.html" rel="bookmark canonical">Review: The Atrocity Archives</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/0441016685/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: The Atrocity Archives</div>
<div class="line">Author: Charles Stross</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Publisher: Ace</div>
<div class="line">Copyright: 2004</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/0441016685/?tag=georgvreill-20">0441016685</a></div>
<div class="line">Pages: 345</div>
<div class="line">Keywords: Love&shy;craft&shy;ian spy thriller</div>
<div class="line">Series: <a class="reference external" href="https://en.wikipedia.org/wiki/The_Laundry_Files">Laundry Files</a>, vol. 1</div>
<div class="line">Reading period: 10–12 January, 2017</div>
</div>
<p>Bob Howard, Laundry hacker newly promoted to field agent,
finds himself protecting a logic professor from rogue <span class="caps">SS</span>-Ahnenerbe agents
who&#8217;ve been hiding in another dimension since the end of the War.
But their biggest problem is the frost giant that was summoned.
And later there&#8217;s the subverted <span class="caps">CCTV</span> cameras with the basilisk&nbsp;stare.</p>
<p>To borrow Charlie Stross&#8217;s own words from his <a class="reference external" href="http://www.antipope.org/charlie/blog-static/2013/05/crib-sheet-the-atrocity-archiv.html">Crib Sheet</a>:</p>
<blockquote>
So there you&#8217;ve got the in&shy;gre&shy;di&shy;ents.
Love&shy;craft&shy;ian horror;
the secret agency [the Laundry] dedicated to protecting us from the scum of the <span>&#8230;<a href="/blog/2017/01/16/ReviewTheAtrocityArchives.html" class="continue">continue</a>.</span></blockquote>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/16/ReviewTheAtrocityArchives.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-15">2017-01-15</time>
        <h1>
            <a href="/blog/2017/01/15/GitFileModes.html" rel="bookmark canonical">Git File Modes</a>
        </h1>
    </header>
    <p>Ever wonder what the six-digit file modes are in a Git commit?
The mysterious <tt class="docutils literal">100644</tt> and <tt class="docutils literal">100755</tt> modes?</p>
<div class="highlight"><pre><span></span><span class="gh">diff --git a/foo/bar.py b/foo/bar.py</span>
old mode 100644
new mode 100755
<span class="gh">index b829edea4..ee6bda024</span>
<span class="gd">--- a/foo/bar.py</span>
<span class="gi">+++ b/foo/bar.py</span>
<span class="gu">@@ -1,3 +1,4 @@</span>
...
</pre></div>
<p>I had made <tt class="docutils literal">foo/bar.py</tt> executable by using <tt class="docutils literal">chmod +x</tt>
and adding a <tt class="docutils literal"><span class="pre">#!/usr/bin/env</span> python</tt> shebang.
The last three digits are obviously the same <a class="reference external" href="http://weblogs.asp.net/george_v_reilly/archive/2004/12/13/284388.aspx">octal</a> digits that you can use with <tt class="docutils literal">chmod</tt>.
But what&#8217;s that <tt class="docutils literal">100</tt> prefix?</p>
<p>The ex&shy;pla&shy;na&shy;tion can be found in a <a class="reference external" href="http://stackoverflow.com/a/8347325/6364">Stack&shy;Over&shy;flow answer</a>:</p>
<pre class="literal-block">
100644₈  regular file (non-executable)  S_IFREG | S_IRUSR | S_IWUSR
                     </pre><span>&#8230;<a href="/blog/2017/01/15/GitFileModes.html" class="continue">continue</a>.</span>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/15/GitFileModes.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-14">2017-01-14</time>
        <h1>
            <a href="/blog/2017/01/14/ReviewBoilingPoint.html" rel="bookmark canonical">Review: Boiling Point</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/0099281082/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Boiling Point</div>
<div class="line">Author: Frank Lean</div>
<div class="line">Rating: ★ ★ ★ ½</div>
<div class="line">Publisher: Arrow</div>
<div class="line">Copyright: 2000</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/0099281082/?tag=georgvreill-20">0099281082</a></div>
<div class="line">Pages: 432</div>
<div class="line">Keywords: crime, <span class="caps">UK</span></div>
<div class="line">Reading period: 2–5 January, 2017</div>
</div>
<p>Dave Cunane is Manchester&#8217;s mouthiest <span class="caps">PI</span>.
He gets tangled up with the wild daughter-in-law of the crooked Carlyle family.
Marti wants him to prove the innocence of her father who&#8217;s doing life for killing a cop.
She doesn&#8217;t go over well with Dave&#8217;s own half-crazy girlfriend.
Neither the Carlyles nor Dave&#8217;s ex-police father want Vince King freed.
It&#8217;s not going to end&nbsp;well.</p>

    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/14/ReviewBoilingPoint.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-13">2017-01-13</time>
        <h1>
            <a href="/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html" rel="bookmark canonical">Computed Parallel Branches in Jenkins Pipeline</a>
        </h1>
    </header>
    <p>I&#8217;ve been using Jenkins lately,
setting up <a class="reference external" href="https://jenkins.io/solutions/pipeline/">Pipeline</a> builds.
I have mixed feelings about that,
but I&#8217;m quite liking&nbsp;Groovy.</p>
<p>Here&#8217;s an example of a <tt class="docutils literal">Closure</tt> called <tt class="docutils literal">ac&shy;cep&shy;tance_in&shy;te&shy;gra&shy;tion_tests</tt>,
where the <tt class="docutils literal">re&shy;lease_lev&shy;el</tt> parameter is a <tt class="docutils literal">String</tt>
which must be either <tt class="docutils literal">&quot;dev&quot;</tt> or <tt class="docutils literal">&quot;prod&quot;</tt>.</p>
<div class="highlight"><pre><span></span><span class="kt">def</span> <span class="n">acceptance_integration_tests</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span> <span class="n">release_level</span> <span class="o">-&gt;</span>
    <span class="k">assert</span> <span class="n">release_level</span> <span class="o">=~</span> <span class="s">/^(dev|prod)$/</span>
    <span class="n">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="s2">&quot;--${release_level}&quot;</span>

    <span class="kt">def</span> <span class="n">branches</span> <span class="o">=</span> <span class="o">[</span>
        <span class="s2">&quot;${release_level}_acceptance_tests&quot;</span><span class="o">:</span> <span class="o">{</span>
            <span class="n">run_tests</span><span class="o">(</span><span class="s2">&quot;ci_acceptance_test&quot;</span><span class="o">,</span> <span class="n">arg</span><span class="o">,</span> <span class="s1">&#39;**/*nosetests.xml&#39;</span><span class="o">)</span>
        <span class="o">},</span>
        </pre><span>&#8230;<a href="/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html" class="continue">continue</a>.</span></div>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-12">2017-01-12</time>
        <h1>
            <a href="/blog/2017/01/12/ReviewDeathOfARedHeroine.html" rel="bookmark canonical">Review: Death of a Red Heroine</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/1569472424/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Death of a Red Heroine</div>
<div class="line">Author: Qiu Xiaolong</div>
<div class="line">Rating: ★ ★ ★ ★ ½</div>
<div class="line">Publisher: Soho Crime</div>
<div class="line">Copyright: 2003</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/1569472424/?tag=georgvreill-20">1569472424</a></div>
<div class="line">Pages: 464</div>
<div class="line">Keywords: crime, China</div>
<div class="line">Reading period: 27 December, 2016–6 January, 2017</div>
</div>
<p>Chen Cao is an unlikely new Chief Inspector in the Shanghai Police in 1990,
as he&#8217;s a poet, a scholar of <span class="caps">T.S.</span> Eliot, and a translator of English detective novels.
In <a class="reference external" href="https://en.wikipedia.org/wiki/Death_of_a_Red_Heroine">Death of a Red Heroine</a>, a <a class="reference external" href="https://en.wikipedia.org/wiki/Model_worker">national model worker</a> has been found murdered in a canal.
The death is po&shy;lit&shy;i&shy;cal&shy;ly sensitive
and Chen&#8217;s in&shy;ves&shy;ti&shy;ga&shy;tion leads him towards the son of a high-ranking cadre,
which makes his position even more&nbsp;tenuous.</p>
<p>Qiu is as much concerned with the changes then happening in <span>&#8230;<a href="/blog/2017/01/12/ReviewDeathOfARedHeroine.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/12/ReviewDeathOfARedHeroine.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-11">2017-01-11</time>
        <h1>
            <a href="/blog/2017/01/11/DiffTransformedFile.html" rel="bookmark canonical">Diff a Transformed File</a>
        </h1>
    </header>
    <p>I wanted to diff two files.
One of them needed some <tt class="docutils literal">sed</tt>s on each line and sorting.
I wanted to do that on the fly,
without leaving a massaged in&shy;ter&shy;me&shy;di&shy;ate file lying&nbsp;around.</p>
<div class="highlight"><pre><span></span>colordiff --unified &lt;<span class="o">(</span>cat orphaned_permalinks.txt
                        <span class="p">|</span> sed <span class="s1">&#39;s@http://www.georgevreilly.com/@@&#39;</span>
                        <span class="p">|</span> sed <span class="s1">&#39;s/.aspx$/.html/&#39;</span>
                 </pre><span>&#8230;<a href="/blog/2017/01/11/DiffTransformedFile.html" class="continue">continue</a>.</span></div>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/11/DiffTransformedFile.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-10">2017-01-10</time>
        <h1>
            <a href="/blog/2017/01/10/LKRhashScalableHashTables.html" rel="bookmark canonical">LKRhash: Scalable Hash Tables</a>
        </h1>
    </header>
    <p>LKRhash is a hashtable that scales to multiple processors and to millions of items.
LKRhash was invented at Microsoft in 1997
by Per-Åke (Paul) Larson of Microsoft Research
and Murali Krishnan and George Reilly of Internet In&shy;for&shy;ma&shy;tion Services.
LKRhash has been used in many Microsoft products.
The techniques that give LKRhash its per&shy;for&shy;mance
include <a class="reference external" href="https://en.wikipedia.org/wiki/Linear_hashing">linear hashing</a>, cache-friendly data structures, and fine-grained&nbsp;locking.</p>
<ul class="simple">
<li><a class="reference external" href="http://nwcpp.org/june-2012.html">Northwest C++ Users&#8217; Group talk</a>, June 2012. <a class="reference external" href="https://speakerdeck.com/georgevreilly/lkrhash-the-design-of-a-scalable-hashtable">Speaker Deck Slides</a>.</li>
<li><a class="reference external" href="/content/LKRhash-for-SoftwarePE.pdf">Un&shy;pub&shy;lished paper</a> submitted to <a class="reference external" href="http://www.wiley.com/WileyCDA/WileyTitle/productCd-SPE.html">Software: Practice <span class="amp">&amp;</span> Experience</a> (Oct&nbsp;1999).</li>
<li><a class="reference external" href="https://patents.google.com/patent/US6578131B1/en"><span class="caps">US</span> 6,578,131 patent</a>. Associated <a class="reference external" href="https://www.google.com/patents/US6578131.pdf"><span class="caps">PDF</span></a> contains some of the <span class="caps">SP</span>&amp;E&nbsp;paper.</li>
</ul>
<p>If Microsoft had had <a class="reference external" href="https://qz.com/115831/googles-20-time-which-brought-you-gmail-and-adsense-is-now-as-good-as-dead/">20% time</a>,
LKRhash would have been my main project.
I put a lot of effort into making it <span>&#8230;<a href="/blog/2017/01/10/LKRhashScalableHashTables.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/10/LKRhashScalableHashTables.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
    
        <a href="/blog/page/3/" class="page floatright">
        Previous &raquo;
        </a>
    
    
        <a href="/blog/" class="page floatleft">
        &laquo; Next
        </a>
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/de/" rel="copyright license">
        <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="by-nc-sa" />
    </a>
    
    
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'georgevreilly'; // required: replace example with your forum shortname
            if (window.location.hostname != 'localhost') {
                 /* * * DON'T EDIT BELOW THIS LINE * * */
                (function () {
                    var s = document.createElement('script'); s.async = true;
                    s.type = 'text/javascript';
                    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
                    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);}());
            }
        </script>
        

  </footer>
</body>
</html>
