<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>George V. Reilly</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start">blog</a></li>
        <li><a href="/about/" rel="home start">about</a></li>
        <li><a href="/atom/" rel="alternate">atom</a></li>
        <li><a href="/rss/" rel="alternate">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2017-01-13">2017-01-13</time>
        <h1>
            <a href="/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html" rel="bookmark canonical">Computed Parallel Branches in Jenkins Pipeline</a>
        </h1>
    </header>
    <p>I&#8217;ve been using Jenkins lately,
setting up <a class="reference external" href="https://jenkins.io/solutions/pipeline/">Pipeline</a> builds.
I have mixed feelings about that,
but I&#8217;m quite liking&nbsp;Groovy.</p>
<p>Here&#8217;s an example of a <tt class="docutils literal">Closure</tt> called <tt class="docutils literal">ac&shy;cep&shy;tance_in&shy;te&shy;gra&shy;tion_tests</tt>,
where the <tt class="docutils literal">re&shy;lease_lev&shy;el</tt> parameter is a <tt class="docutils literal">String</tt>
which must be either <tt class="docutils literal">&quot;dev&quot;</tt> or <tt class="docutils literal">&quot;prod&quot;</tt>.</p>
<div class="highlight"><pre><span></span><span class="kt">def</span> <span class="n">acceptance_integration_tests</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span> <span class="n">release_level</span> <span class="o">-&gt;</span>
    <span class="k">assert</span> <span class="n">release_level</span> <span class="o">=~</span> <span class="s">/^(dev|prod)$/</span>
    <span class="n">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="s2">&quot;--${release_level}&quot;</span>

    <span class="kt">def</span> <span class="n">branches</span> <span class="o">=</span> <span class="o">[</span>
        <span class="s2">&quot;${release_level}_acceptance_tests&quot;</span><span class="o">:</span> <span class="o">{</span>
            <span class="n">run_tests</span><span class="o">(</span><span class="s2">&quot;ci_acceptance_test&quot;</span><span class="o">,</span> <span class="n">arg</span><span class="o">,</span> <span class="s1">&#39;**/*nosetests.xml&#39;</span><span class="o">)</span>
        <span class="o">},</span>
        </pre><span>&#8230;<a href="/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html" class="continue">continue</a>.</span></div>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/13/ComputedParallelBranchesInJenkinsPipeline.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-12">2017-01-12</time>
        <h1>
            <a href="/blog/2017/01/12/ReviewDeathOfARedHeroine.html" rel="bookmark canonical">Review: Death of a Red Heroine</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/1569472424/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Death of a Red Heroine</div>
<div class="line">Author: Qiu Xiaolong</div>
<div class="line">Rating: ★ ★ ★ ★ ½</div>
<div class="line">Publisher: Soho Crime</div>
<div class="line">Copyright: 2003</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/1569472424/?tag=georgvreill-20">1569472424</a></div>
<div class="line">Pages: 464</div>
<div class="line">Keywords: crime, China</div>
<div class="line">Reading period: 27 December, 2016–6 January, 2017</div>
</div>
<p>Chen Cao is an unlikely new Chief Inspector in the Shanghai Police in 1990,
as he&#8217;s a poet, a scholar of <span class="caps">T.S.</span> Eliot, and a translator of English detective novels.
In <a class="reference external" href="https://en.wikipedia.org/wiki/Death_of_a_Red_Heroine">Death of a Red Heroine</a>, a <a class="reference external" href="https://en.wikipedia.org/wiki/Model_worker">national model worker</a> has been found murdered in a canal.
The death is po&shy;lit&shy;i&shy;cal&shy;ly sensitive
and Chen&#8217;s in&shy;ves&shy;ti&shy;ga&shy;tion leads him towards the son of a high-ranking cadre,
which makes his position even more&nbsp;tenuous.</p>
<p>Qiu is as much concerned with the changes then happening in <span>&#8230;<a href="/blog/2017/01/12/ReviewDeathOfARedHeroine.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/12/ReviewDeathOfARedHeroine.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-11">2017-01-11</time>
        <h1>
            <a href="/blog/2017/01/11/DiffTransformedFile.html" rel="bookmark canonical">Diff a Transformed File</a>
        </h1>
    </header>
    <p>I wanted to diff two files.
One of them needed some <tt class="docutils literal">sed</tt>s on each line and sorting.
I wanted to do that on the fly,
without leaving a massaged in&shy;ter&shy;me&shy;di&shy;ate file lying&nbsp;around.</p>
<div class="highlight"><pre><span></span>colordiff --unified &lt;<span class="o">(</span>cat orphaned_permalinks.txt
                        <span class="p">|</span> sed <span class="s1">&#39;s@http://www.georgevreilly.com/@@&#39;</span>
                        <span class="p">|</span> sed <span class="s1">&#39;s/.aspx$/.html/&#39;</span>
                 </pre><span>&#8230;<a href="/blog/2017/01/11/DiffTransformedFile.html" class="continue">continue</a>.</span></div>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/11/DiffTransformedFile.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-10">2017-01-10</time>
        <h1>
            <a href="/blog/2017/01/10/LKRhashScalableHashTables.html" rel="bookmark canonical">LKRhash: Scalable Hash Tables</a>
        </h1>
    </header>
    <p>LKRhash is a hashtable that scales to multiple processors and to millions of items.
LKRhash was invented at Microsoft in 1997
by Per-Åke (Paul) Larson of Microsoft Research
and Murali Krishnan and George Reilly of Internet In&shy;for&shy;ma&shy;tion Services.
LKRhash has been used in many Microsoft products.
The techniques that give LKRhash its per&shy;for&shy;mance
include <a class="reference external" href="https://en.wikipedia.org/wiki/Linear_hashing">linear hashing</a>, cache-friendly data structures, and fine-grained&nbsp;locking.</p>
<ul class="simple">
<li><a class="reference external" href="http://nwcpp.org/june-2012.html">Northwest C++ Users&#8217; Group talk</a>, June 2012. <a class="reference external" href="https://speakerdeck.com/georgevreilly/lkrhash-the-design-of-a-scalable-hashtable">Speaker Deck Slides</a>.</li>
<li><a class="reference external" href="/content/LKRhash-for-SoftwarePE.pdf">Un&shy;pub&shy;lished paper</a> submitted to <a class="reference external" href="http://www.wiley.com/WileyCDA/WileyTitle/productCd-SPE.html">Software: Practice <span class="amp">&amp;</span> Experience</a> (Oct&nbsp;1999).</li>
<li><a class="reference external" href="https://patents.google.com/patent/US6578131B1/en"><span class="caps">US</span> 6,578,131 patent</a>. Associated <a class="reference external" href="https://www.google.com/patents/US6578131.pdf"><span class="caps">PDF</span></a> contains some of the <span class="caps">SP</span>&amp;E&nbsp;paper.</li>
</ul>
<p>If Microsoft had had <a class="reference external" href="https://qz.com/115831/googles-20-time-which-brought-you-gmail-and-adsense-is-now-as-good-as-dead/">20% time</a>,
LKRhash would have been my main project.
I put a lot of effort into making it <span>&#8230;<a href="/blog/2017/01/10/LKRhashScalableHashTables.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/10/LKRhashScalableHashTables.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-09">2017-01-09</time>
        <h1>
            <a href="/blog/2017/01/09/ReviewWatchYourBack.html" rel="bookmark canonical">Review: Watch Your Back!</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/0446617121/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Watch Your Back!</div>
<div class="line">Author: Donald E. Westlake</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Publisher: Warner</div>
<div class="line">Copyright: 2005</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/0446617121/?tag=georgvreill-20">0446617121</a></div>
<div class="line">Pages: 345</div>
<div class="line">Keywords: crime, humor</div>
<div class="line">Reading period: 9 January, 2017</div>
</div>
<p><em>Watch Your Back!</em> is one of the last <a class="reference external" href="/blog/2016/05/31/ReviewJimmyTheKidAudiobook.html">Dortmunder novels</a>,
Westlake&#8217;s comic series about an <a class="reference external" href="https://en.wikipedia.org/wiki/John_Dortmunder">unlucky crook</a>
published between 1970 and 2008.
Dortmunder and his crew have a sweet lead on an unoccupied penthouse apartment,
but their usual planning space, the <span class="caps">O.J.</span> Bar <span class="amp">&amp;</span> Grill,
has been turned into a <a class="reference external" href="http://www.zerohedge.com/article/guest-post-busting-out-joint">bust-out joint</a> by the Jersey mob.
So now they have two jobs to pull:
rob the obnoxious rich guy&#8217;s art and save the <span class="caps">O.J.
</span>Of course, com&shy;pli&shy;ca&shy;tions arise
because nothing ever goes to plan in a Dortmunder&nbsp;book.</p>
<p>Enjoyable.</p>

    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/09/ReviewWatchYourBack.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-08">2017-01-08</time>
        <h1>
            <a href="/blog/2017/01/08/MoreBlogCleanup.html" rel="bookmark canonical">More Blog Cleanup</a>
        </h1>
    </header>
    <p><a class="reference external" href="/blog/2017/01/02/BlogCleanup.html">Last weekend</a>, I restored a number of posts that had appeared
on the earlier <a class="reference external" href="https://github.com/shanselman/dasblog">dasBlog</a> in&shy;car&shy;na&shy;tion of this blog,
but had never made it to the <a class="reference external" href="https://posativ.org/acrylamid/">Acrylamid</a>&nbsp;version.</p>
<p>I added about another 50 posts this weekend,
taken from the <a class="reference external" href="http://web.archive.org/web">Wayback Machine</a>.
I think that this is all the posts that are&nbsp;missing.</p>
<p>That required further fixup.
I had to turn the <span class="caps">HTML</span> back into re&shy;Struc&shy;tured&shy;Text, which I did by&nbsp;hand.</p>
<p>Some useful tips will follow in future&nbsp;posts.</p>

    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/08/MoreBlogCleanup.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-07">2017-01-07</time>
        <h1>
            <a href="/blog/2017/01/07/ReviewDrStrange.html" rel="bookmark canonical">Review: Dr. Strange</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://en.wikipedia.org/wiki/Doctor_Strange_(film)"></a>
<div class="line-block">
<div class="line">Title: Dr. Strange</div>
<div class="line">Director: Scott Derrickson</div>
<div class="line">Rating: ★ ★ ★ ½</div>
<div class="line">Released: 2016</div>
<div class="line">Keywords: Marvel, fantasy</div>
<div class="line">Watched: 7 January, 2017</div>
</div>
<p>Stephen Strange is a world-class surgeon whose talent is only matched by his arrogance.
His hands are ruined by a car crash, leaving him desperate to regain their use.
In Nepal, he finds a temple of sorcerers led by the Ancient One,
where he learns new and un&shy;sus&shy;pect&shy;ed ways of dealing with the world.
Eventually he takes on the renegade sorcerer Kaecilius,
who wants to summon Dormammu from the Dark Dimension to change the&nbsp;world.</p>
<p>Aside from his very odd American accent,
Benedict Cum&shy;ber&shy;batch does a decent job with a not-great script
of portraying one <span>&#8230;<a href="/blog/2017/01/07/ReviewDrStrange.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/07/ReviewDrStrange.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-05">2017-01-05</time>
        <h1>
            <a href="/blog/2017/01/05/GitPruningUnusedBranches.html" rel="bookmark canonical">Git: pruning unused branches</a>
        </h1>
    </header>
    <p>Ever had a Git repository where there&#8217;s an over&shy;whelm&shy;ing number of branches,
most of which are surely abandoned?
You run <tt class="docutils literal">git branch <span class="pre">--remote</span></tt> and you see dozens of unfamiliar branches.
Where to&nbsp;begin?</p>
<ul class="simple">
<li>Use <a class="reference external" href="http://stackoverflow.com/a/11144311/6364">git for-each-ref &#8211;sort</a> to sort the branches
so that you can identify the oldest&nbsp;branches.</li>
<li>Use <a class="reference external" href="http://stackoverflow.com/a/227026/6364">git branch &#8211;remote &#8211;merged master</a>
to detect which branches have already been merged into <tt class="docutils literal">master</tt>.
It&#8217;s likely that these are branches that weren&#8217;t deleted
after a pull request was merged;
it&#8217;s usually safe to delete&nbsp;these.</li>
<li><tt class="docutils literal"><span class="pre">--no-merged</span></tt> shows unmerged branches;
these require further&nbsp;in&shy;ves&shy;ti&shy;ga&shy;tion.</li>
</ul>
<p>Here&#8217;s an example for <a class="reference external" href="https://github.com/cookbrite/flyingcloud">fly&shy;ing&shy;cloud</a>:</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> git <span class="k">for</span>-each-ref --sort<span class="o">=</span>-committerdate <span class="se">\</span>
<span class="go">    --format=&#39;%(committerdate:short) %(refname)&#39; refs/heads refs/remotes</span>
<span class="go">2016-12-29 refs/remotes/origin/master</span>
<span class="go">2016-12-29 refs/remotes/origin/<span class="caps">HEAD</span></span>
<span class="go">2016-12-29 refs/heads/master</span>
<span class="go">2016-12-11 refs/remotes/origin/0.1.x</span>
<span class="go">2016-06-09 refs/remotes/origin/fix/salt-pip-version-problem-in-demo</span>
<span class="go">2016-05-25 refs/remotes/origin/updates</span>
<span class="go">2016-05-09 refs/remotes/origin/feature/documentation-improvements-3</span>
<span class="go">2016-04-19 </span></pre><span>&#8230;<a href="/blog/2017/01/05/GitPruningUnusedBranches.html" class="continue">continue</a>.</span></div>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/05/GitPruningUnusedBranches.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-04">2017-01-04</time>
        <h1>
            <a href="/blog/2017/01/04/MarkdownLivePreview.html" rel="bookmark canonical">Markdown Live Preview</a>
        </h1>
    </header>
    <p>It&#8217;s very useful when creating <a class="reference external" href="https://guides.github.com/features/mastering-markdown/">Markdown</a> to be able to preview it live.
For example, creating a complex pull request or a <tt class="docutils literal"><span class="caps">README</span>.md</tt>.
I usually use the built-in <a class="reference external" href="https://github.com/atom/markdown-preview">Atom Markdown Preview</a> package in <a class="reference external" href="https://atom.io/">Atom</a>.
Just type <tt class="docutils literal">⌃⇧M</tt> (aka <tt class="docutils literal">Ctrl+Shift+M</tt>) to see a live preview in an adjacent pane.
I use <a class="reference external" href="https://atom.io/packages/vim-mode-plus">vim-mode-plus</a> to edit in Atom,
which provides an acceptable emulation of&nbsp;Vim.</p>
<p>I recently discovered <a class="reference external" href="https://code.visualstudio.com/Docs/languages/markdown"><span class="caps">VS</span> Code Markdown Preview</a> in <a class="reference external" href="https://code.visualstudio.com/">Visual Studio Code</a>.
Type <tt class="docutils literal">⌘K&nbsp;V</tt> (aka <tt class="docutils literal">Ctrl+K&nbsp;V</tt> on Windows or Linux)
to invoke the side-by-side live preview.
I use <a class="reference external" href="https://github.com/VSCodeVim/Vim">VSCodeVim</a> to meet my Vim&nbsp;needs.</p>
<p>Un&shy;for&shy;tu&shy;nate&shy;ly, neither previewer gives identical results to GitHub&#8217;s Markdown renderer.
GitHub itself seems to use different renderers for <span>&#8230;<a href="/blog/2017/01/04/MarkdownLivePreview.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/04/MarkdownLivePreview.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2017-01-03">2017-01-03</time>
        <h1>
            <a href="/blog/2017/01/03/ReviewBasketCase.html" rel="bookmark canonical">Review: Basket Case</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.amazon.com/dp/0345806530/?tag=georgvreill-20"></a>
<div class="line-block">
<div class="line">Title: Basket Case</div>
<div class="line">Author: Carl Hiaasen</div>
<div class="line">Rating: ★ ★ ★ ★</div>
<div class="line">Publisher: Vintage Crime/Black Lizard</div>
<div class="line">Copyright: 2002</div>
<div class="line"><span class="caps">ISBN</span>: <a class="reference external" href="http://www.amazon.com/dp/0345806530/?tag=georgvreill-20">0345806530</a></div>
<div class="line">Pages: 336</div>
<div class="line">Keywords: crime, humor</div>
<div class="line">Reading period: 28–31 December, 2016</div>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Basket_Case_(novel)">Basket Case</a>, like most of Hiaasen&#8217;s novels,
is a humorous crime caper set in Florida.
Quick-witted but neurotic reporter Jack Tagger
has been exiled to the obituary department for mouthing off too often.
When Jimmy Stoma, lead singer of the Slut Puppies, dies in an apparent accident,
Tagger senses a potential story and a chance for a comeback.
But he has to get the story before it gets taken away from&nbsp;him.</p>
<p>Hiaasen, himself a journalist, also uses the novel to explore journalism as a career
and to rant <span>&#8230;<a href="/blog/2017/01/03/ReviewBasketCase.html" class="continue">continue</a>.</span></p>
    <footer>
        
            <a class="floatright" href="http://www.georgevreilly.com/blog/2017/01/03/ReviewBasketCase.html#disqus_thread">Comment</a>
        
        
            <p>untagged</p>
        
    </footer>
    <div class="comments"></div>
</article>


    
    
        <a href="/blog/page/4/" class="page floatright">
        Previous &raquo;
        </a>
    
    
        <a href="/blog/page/2/" class="page floatleft">
        &laquo; Next
        </a>
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/de/" rel="copyright license">
        <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="by-nc-sa" />
    </a>
    
    
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'georgevreilly'; // required: replace example with your forum shortname
            if (window.location.hostname != 'localhost') {
                 /* * * DON'T EDIT BELOW THIS LINE * * */
                (function () {
                    var s = document.createElement('script'); s.async = true;
                    s.type = 'text/javascript';
                    s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
                    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);}());
            }
        </script>
        

  </footer>
</body>
</html>
