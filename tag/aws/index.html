<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>George V. Reilly</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start" title="George's full blog">blog</a></li>
        <li><a href="/til/" rel="home start" title="Today George Learned">TIL</a></li>
        <li><a href="/about/" rel="home start" title="About George">about</a></li>
        <li><a href="/atom/" rel="alternate" title="Atom Feed">atom</a></li>
        <li><a href="/rss/" rel="alternate" title="RSS Feed">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
        <li><a href="/tags/" rel="contents">tags</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2016-08-01">2016-08-01</time>
        <h1>
            <a href="/blog/2016/08/01/CreatingExternalSSLCertificatesForCloudFront.html" rel="bookmark canonical">Creating External SSL Certificates for CloudFront</a>
        </h1>
    </header>
    <p>I needed to create a wildcard SSL cer&shy;tifi&shy;cate and upload it to <a class="reference external" href="https://aws.amazon.com/cloudfront/">AWS CloudFront</a> today.</p>
<p>First, generate a 2048-bit private key. This will prompt you for a passphrase:</p>
<pre class="code bash literal-block">
$<span class="w"> </span>openssl<span class="w"> </span>genrsa<span class="w"> </span>-des3<span class="w"> </span>-out<span class="w"> </span>example.key<span class="w"> </span><span class="m">2048</span>
</pre>
<p>Check which signature algorithm was used (SHA-256 is rec&shy;om&shy;mend&shy;ed):</p>
<pre class="code bash literal-block">
$<span class="w"> </span>openssl<span class="w"> </span>req<span class="w"> </span>-in<span class="w"> </span>example.csr<span class="w"> </span>-noout<span class="w"> </span>-text
</pre>
<p>Transform the private key to PEM format:</p>
<pre class="code bash literal-block">
$<span class="w"> </span>openssl<span class="w"> </span>rsa<span class="w"> </span>-outform<span class="w"> </span>PEM<span class="w"> </span>-in<span class="w"> </span>example.key<span class="w"> </span>-out<span class="w"> </span>example.pem
</pre>
<p>Generate a Cer&shy;tifi&shy;cate Signing Request. Note the <tt class="docutils literal">*</tt> in the server FQDN:</p>
<pre class="code bash literal-block">
$<span class="w"> </span>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>example.key<span class="w"> </span>-out<span class="w"> </span>example.csr<span class="w">

</span>Country<span class="w"> </span>Name<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span>letter<span class="w"> </span>code<span class="o">)</span><span class="w"> </span><span class="o">[</span>AU<span class="o">]</span>:US<span class="w">
</span>State<span class="w"> </span>or<span class="w"> </span>Province<span class="w"> </span>Name<span class="w"> </span><span class="o">(</span>full<span class="w"> </span>name<span class="o">)</span><span class="w"> </span><span class="o">[</span>Some-State<span class="o">]</span>:Washington<span class="w">
</span>Locality<span class="w"> </span>Name<span class="w"> </span><span class="o">(</span>eg,<span class="w"> </span>city<span class="o">)</span><span class="w"> </span><span class="o">[]</span>:Seattle<span class="w">
</span>Organization<span class="w"> </span>Name<span class="w"> </span><span class="o">(</span>eg,<span class="w"> </span>company<span class="o">)</span><span class="w"> </span><span class="o">[</span>Internet<span class="w"> </span>Widgits<span class="w"> </span>Pty<span class="w"> </span></pre><span>&#8230;<a href="/blog/2016/08/01/CreatingExternalSSLCertificatesForCloudFront.html" class="continue">continue</a>.</span>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/tech/" rel="tag">tech</a>,
                <a href="/tag/ssl/" rel="tag">ssl</a>,
                <a href="/tag/aws/" rel="tag">aws</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-06-28">2016-06-28</time>
        <h1>
            <a href="/blog/2016/06/28/CreatingANewPostgreSQLDatabaseAtRDS.html" rel="bookmark canonical">Creating a New PostgreSQL Database at RDS</a>
        </h1>
    </header>
    <p>Many of us are guilty of saying “database” when we mean a database server or a DBMS.
A database is a collection of tables storing related data,
schemas, stored procs, and per&shy;mis&shy;sions.
Most database servers are capable of managing many databases si&shy;mul&shy;ta&shy;ne&shy;ous&shy;ly.</p>
<p>I needed to create a new PostgreSQL database at Amazon's RDS last week.
I already had an RDS instance; I needed a new database on that instance.
My Google searches turned up various recipes for creating a new RDS instance.</p>
<p>The following worked for me:</p>
<ul class="simple">
<li>SSH to an EC2 instance inside our VPC,
so that I could connect to the RDS instance using <a class="reference external" href="http://postgresguide.com/utilities/psql.html">psql</a>.</li>
<li>Then run:</li>
</ul>
<pre class="code bash literal-block">
psql<span class="w"> </span>--host<span class="o">=</span>SOME-DBMS-HOST<span class="w"> </span>--dbname<span class="w"> </span></pre><span>&#8230;<a href="/blog/2016/06/28/CreatingANewPostgreSQLDatabaseAtRDS.html" class="continue">continue</a>.</span>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/postgres/" rel="tag">postgres</a>,
                <a href="/tag/aws/" rel="tag">aws</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-06-18">2016-06-18</time>
        <h1>
            <a href="/blog/2016/06/18/DeployingDockerContainersOnAWSPart3.html" rel="bookmark canonical">Deploying Docker Containers on AWS, part 3</a>
        </h1>
    </header>
    <p>I complained <a class="reference external" href="/blog/2016/06/18/17/DeployingDockerContainersOnAWSPart2.html">yesterday</a> about my dif&shy;fi&shy;cul&shy;ties in deploying Docker containers on AWS.
I have since succeeded in getting my app to deploy on Elas&shy;ticBeanstalk,
though I have not quite ironed out all the problems.</p>
<p>I found several problems:</p>
<blockquote>
<ul class="simple">
<li>I had to revert from a Multi-Container Docker en&shy;vi&shy;ron&shy;ment
to a Single-Container Docker en&shy;vi&shy;ron&shy;ment
because ECS wasn't starting in the multi-container en&shy;vi&shy;ron&shy;ment.
That meant I had to revert to a v1 <tt class="docutils literal">Dockerrun.aws.json</tt>.</li>
<li>I had to ensure that the Instance Profile had the
Ama&shy;zonEC2&shy;Con&shy;tain&shy;erReg&shy;istryRead&shy;On&shy;ly policy attached,
so that I could pull from the EC2 Container Repository.</li>
</ul>
</blockquote>

    <footer>
        
        
            <p>tagged as
                <a href="/tag/docker/" rel="tag">docker</a>
                    and
                    
                <a href="/tag/aws/" rel="tag">aws</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-06-17">2016-06-17</time>
        <h1>
            <a href="/blog/2016/06/17/DeployingDockerContainersOnAWSPart2.html" rel="bookmark canonical">Deploying Docker Containers on AWS, part 2</a>
        </h1>
    </header>
    <p>I complained <a class="reference external" href="/blog/2016/05/24/DeployingADockerContainerOnAWS.html">a few weeks ago</a> about how hard it was to deploy Docker containers on AWS.</p>
<p>This week has been nothing but container-related frus&shy;tra&shy;tion.
We have two apps running in Kubernetes clusters on top of AWS.
This is not a well-supported scenario and we have a fragile script
that spends a lot of time sitting in polling loops,
waiting for various things to happen like DNS updates taking effect,
the new cluster being available, and so on.
One of the apps has decided to stop deploying.
I do not know why.</p>
<p>I've been trying to get a new app deployed on ECS, the EC2 Container Service.
The way to <span>&#8230;<a href="/blog/2016/06/17/DeployingDockerContainersOnAWSPart2.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/docker/" rel="tag">docker</a>
                    and
                    
                <a href="/tag/aws/" rel="tag">aws</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-05-24">2016-05-24</time>
        <h1>
            <a href="/blog/2016/05/24/DeployingADockerContainerOnAWS.html" rel="bookmark canonical">Deploying a Docker Container on AWS</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://www.ybrikman.com/writing/2015/11/11/running-docker-aws-ground-up/"></a>
<p>I spent a couple of frus&shy;trat&shy;ing hours this evening
trying to figure out an easy way to deploy a Docker container on AWS.
I tried out the <a class="reference external" href="https://aws.amazon.com/ecs/">EC2 Container Service</a> and got lost
in a sea of Clusters, Tasks, and Services.
I couldn't connect to the EC2 instance where my container supposedly lived.</p>
<p>I tried <a class="reference external" href="https://aws.amazon.com/elasticbeanstalk/">Elastic Beanstalk</a> and gave up in ex&shy;as&shy;per&shy;a&shy;tion.
When you create a new Docker en&shy;vi&shy;ron&shy;ment,
there's no way to pull an existing image from an external repo
that I could see.
We have some tools for deploying a Docker image to Elastic Beanstalk,
but they were so cryptic that I didn't want to pursue that.</p>
<p>Eventually I <span>&#8230;<a href="/blog/2016/05/24/DeployingADockerContainerOnAWS.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/docker/" rel="tag">docker</a>
                    and
                    
                <a href="/tag/aws/" rel="tag">aws</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
    
    
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="copyright license">
        <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="by-nc-sa" />
    </a>
    
    

  </footer>
</body>
</html>
