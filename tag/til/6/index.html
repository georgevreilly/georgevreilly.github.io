<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>George V. Reilly</title>
  <link media="all" href="/style.css" rel="stylesheet" />
  <link media="all" href="/pygments.css" rel="stylesheet" />
  <link href="/favicon.ico" rel="shortcut icon" />
    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
  <link href="/" rel="home start" />
  <link href="/atom/" type="application/atom+xml" rel="alternate" title="Atom Feed" />
  <link href="/rss/" type="application/rss+xml" rel="alternate" title="RSS Feed" />
</head>
<body>
  <header>
    <h1><a href="/" rel="home start" class="blogtitle">George V. Reilly</a></h1>
    <nav>
      <ul>
        <li><a href="/blog/" rel="home start" title="George's full blog">blog</a></li>
        <li><a href="/til/" rel="home start" title="Today George Learned">TIL</a></li>
        <li><a href="/about/" rel="home start" title="About George">about</a></li>
        <li><a href="/atom/" rel="alternate" title="Atom Feed">atom</a></li>
        <li><a href="/rss/" rel="alternate" title="RSS Feed">rss</a></li>
        <li><a href="/articles/" rel="contents">articles</a></li>
        <li><a href="/tags/" rel="contents">tags</a></li>
      </ul>
    </nav>
  </header>
    
        <article>
    <header>
        <time datetime="2016-01-31">2016-01-31</time>
        <h1>
            <a href="/blog/2016/01/31/URLsFromUnicodeStrings.html" rel="bookmark canonical">URLs from Unicode Strings</a>
        </h1>
    </header>
    <p></p>
<blockquote>
[Pre&shy;vi&shy;ous&shy;ly published at the now defunct <a class="reference external" href="https://web.archive.org/web/20171001220321/http://devblog.metabrite.com/">MetaBrite Dev Blog</a>.]</blockquote>
<p>Some time ago,
we made an ill-considered decision to use recipe names for image URLs,
which simplified image management with our then-rudi&shy;men&shy;ta&shy;ry tools.
For example, the recipe named
<tt class="docutils literal">&quot;Twisted Pasta With Browned Butter, Sage, and Walnuts&quot;</tt>
becomes a URL ending in
<tt class="docutils literal">&quot;Twist&shy;ed%20&shy;Pas&shy;ta%20With&shy;%20Browned%20But&shy;ter%2C%20Sage%2C%20and%20Wal&shy;nuts.jpg&quot;</tt>.</p>
<p>Life becomes more in&shy;ter&shy;est&shy;ing when you escape the confines of 7-bit ASCII and use Unicode.
How should <tt class="docutils literal">u&quot;Sautéed crème fraîche Provençale&quot;</tt> be handled?
The only reasonable thing to do is to first convert the Unicode string to UTF-8
and then hex-encode those octets:
<tt class="docutils literal">&quot;Saut%C3%A9ed%20cr%C3%A8me%20fra%C3%AEche%20Proven%C3%A7ale&quot;</tt>.</p>
<p>That seems reasonable, but it was giving us in&shy;con&shy;sis&shy;tent results
when the images were uploaded to an S3 bucket.
When <span>&#8230;<a href="/blog/2016/01/31/URLsFromUnicodeStrings.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/unicode/" rel="tag">unicode</a>,
                <a href="/tag/urls/" rel="tag">urls</a>,
                <a href="/tag/metabrite/" rel="tag">metabrite</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-24">2016-01-24</time>
        <h1>
            <a href="/blog/2016/01/24/NoseTestDiscovery.html" rel="bookmark canonical">Nose Test Discovery</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="http://nose.readthedocs.org/"></a>
<p>I figured out why I saw the following error every time I ran <a class="reference external" href="/blog/2015/03/02/NosetestsWontDiscoverExecutableFiles.html">Nose</a>:</p>
<pre class="code python literal-block">
<span class="o">======================================================================</span><span class="w">
</span><span class="n">ERROR</span><span class="p">:</span> <span class="n">Failure</span><span class="p">:</span> <span class="ne">TypeError</span> <span class="p">(</span><span class="nb">type</span><span class="p">()</span> <span class="n">takes</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">3</span> <span class="n">arguments</span><span class="p">)</span><span class="w">
</span><span class="o">----------------------------------------------------------------------</span><span class="w">
</span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span><span class="w">
</span>  <span class="n">File</span> <span class="s2">&quot;.../lib/python2.7/site-packages/nose-1.3.7-py2.7.egg/nose/loader.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">523</span><span class="p">,</span> <span class="ow">in</span> <span class="n">makeTest</span><span class="w">
</span>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_makeTest</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span><span class="w">
</span>  <span class="n">File</span> <span class="s2">&quot;.../lib/python2.7/site-packages/nose-1.3.7-py2.7.egg/nose/loader.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">582</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_makeTest</span><span class="w">
</span>    <span class="k">return</span> <span class="n">MethodTestCase</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w">
</span>  <span class="n">File</span> <span class="s2">&quot;.../lib/python2.7/site-packages/nose-1.3.7-py2.7.egg/nose/case.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">345</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__init__</span><span class="w">
</span>    <span class="bp">self</span><span class="o">.</span><span class="n">inst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cls</span><span class="p">()</span><span class="w">
</span><span class="ne">TypeError</span><span class="p">:</span> <span class="nb">type</span><span class="p">()</span> <span class="n">takes</span> <span class="mi">1</span> <span class="ow">or</span> <span class="mi">3</span> <span class="n">arguments</span>
</pre>
<p>It turns out that one module was importing a class called <tt class="docutils literal">TestApi</tt>
which had a <tt class="docutils literal">class&shy;method</tt> called <tt class="docutils literal">run_in&shy;te&shy;gra&shy;tion_tests</tt>.
The module itself had no tests; it just declared a class called <tt class="docutils literal">TestO&shy;b&shy;fus&shy;cat&shy;ed&shy;Mix&shy;in</tt>,
which used some <span>&#8230;<a href="/blog/2016/01/24/NoseTestDiscovery.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-22">2016-01-22</time>
        <h1>
            <a href="/blog/2016/01/22/PythonRecursiveGenerators.html" rel="bookmark canonical">Recursive Generators in Python 2 and 3</a>
        </h1>
    </header>
    <p></p>
<blockquote>
<p>Generators decouple iteration from the code
that uses the results of the iteration.</p>
<p class="attribution">&mdash;David Beazley, <a class="reference external" href="https://www.dabeaz.com/generators/">Generators</a></p>
</blockquote>
<blockquote>
[Pre&shy;vi&shy;ous&shy;ly published at the now defunct <a class="reference external" href="https://web.archive.org/web/20171001220321/http://devblog.metabrite.com/">MetaBrite Dev Blog</a>.]</blockquote>
<p>Python generators have a <a class="reference external" href="https://www.dabeaz.com/generators/">variety of uses</a>.
One such is to lazily evaluate sequences.
Another is for <a class="reference external" href="https://www.dabeaz.com/coroutines/">coroutines</a>.
Yet another is to re&shy;cur&shy;sive&shy;ly traverse a tree or a graph,
yielding an iterable sequence.</p>
<p>Consider this simple tree of nodes:</p>
<pre class="code python literal-block">
<span class="n">node_tree</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="w">
</span>    <span class="s1">'a'</span><span class="p">,</span> <span class="p">[</span><span class="w">
</span>        <span class="n">Node</span><span class="p">(</span><span class="s1">'b'</span><span class="p">,</span> <span class="p">[</span><span class="w">
</span>            <span class="n">Node</span><span class="p">(</span><span class="s1">'e'</span><span class="p">,</span> <span class="p">[</span><span class="w">
</span>                <span class="n">Node</span><span class="p">(</span><span class="s1">'g'</span><span class="p">)</span><span class="w">
</span> </pre><span>&#8230;<a href="/blog/2016/01/22/PythonRecursiveGenerators.html" class="continue">continue</a>.</span>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>,
                <a href="/tag/metabrite/" rel="tag">metabrite</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-19">2016-01-19</time>
        <h1>
            <a href="/blog/2016/01/19/PsqlCouldNotConnectToServer.html" rel="bookmark canonical">psql: could not connect to server</a>
        </h1>
    </header>
    <p>I wanted to clean out my local PostgreSQL database today
so that I could restore a database dump taken on another system,
but every time I ran the <a class="reference external" href="http://postgresguide.com/utilities/psql.html">psql</a> utility, I got:</p>
<pre class="literal-block">
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket &quot;/tmp/.s.PGSQL.5432&quot;?
</pre>
<p>I tried various things, including restarting Postgres several times,
but nothing helped.
Eventually, I thought to look in <tt class="docutils literal">/usr/local/var/postgres/server.log</tt>,
where I saw several error messages indicating that Postgres 9.5
couldn't read data files created with 9.4.
At that point, I realized that during my most recent <tt class="docutils literal">brew <span>&#8230;<a href="/blog/2016/01/19/PsqlCouldNotConnectToServer.html" class="continue">continue</a>.</span></tt></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/postgres/" rel="tag">postgres</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-17">2016-01-17</time>
        <h1>
            <a href="/blog/2016/01/17/RelativeImportsInAPythonScript.html" rel="bookmark canonical">Relative Imports in a Python Script</a>
        </h1>
    </header>
    <p>Have you ever attempted a <a class="reference external" href="https://www.python.org/dev/peps/pep-0328/">relative import</a> in a Python script?</p>
<pre class="code bash literal-block">
$<span class="w"> </span>./foo/bar/script.py<span class="w"> </span>some<span class="w"> </span>parameters<span class="w">
</span>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:<span class="w">
  </span>File<span class="w"> </span><span class="s2">&quot;foo/bar/script.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">16</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;<span class="w">
    </span>from<span class="w"> </span>.quux<span class="w"> </span>import<span class="w"> </span>find_vcs<span class="w">
</span>ValueError:<span class="w"> </span>Attempted<span class="w"> </span>relative<span class="w"> </span>import<span class="w"> </span><span class="k">in</span><span class="w"> </span>non-package
</pre>
<p>I prefer to use <a class="reference external" href="https://www.python.org/dev/peps/pep-0328/">absolute imports</a> to minimize ambiguity and confusion,
and most of my Python modules begin with:</p>
<pre class="code python literal-block">
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">print_function</span>
</pre>
<p>(Using <a class="reference external" href="https://www.python.org/dev/peps/pep-3112/">uni&shy;code_lit&shy;er&shy;als</a> and <a class="reference external" href="https://www.python.org/dev/peps/pep-3105/">print&shy;_&shy;func&shy;tion</a> makes porting to Python 3 easier.)</p>
<p>I recently read the accepted answer to <a class="reference external" href="http://stackoverflow.com/questions/14132789/python-relative-imports-for-the-billionth-time">Python relative imports for the billionth time</a>
and the solution to the above <tt class="docutils literal">ValueError</tt> occurred to me:
Use <tt class="docutils literal">python <span class="pre">-m</span> package</tt> instead:</p>
<pre class="code bash literal-block">
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>foo.bar.script<span class="w"> </span>some<span class="w"> </span>parameters
</pre>
<p>(Assuming that <span>&#8230;<a href="/blog/2016/01/17/RelativeImportsInAPythonScript.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-16">2016-01-16</time>
        <h1>
            <a href="/blog/2016/01/16/InstallingPython2_7_11onUbuntu.html" rel="bookmark canonical">Installing Python 2.7.11 on Ubuntu</a>
        </h1>
    </header>
    <p>We deploy on Ubuntu 14.04, the most recent Long Term Support release.
It comes with Python 2.7.6,
but we need Python 2.7.9+ to get the some important SSL fixes
and work with a recent version of the <a class="reference external" href="http://docs.python-requests.org/en/latest/">Requests</a> library.</p>
<p>Felix Krull maintains a Personal Package Archive for <a class="reference external" href="https://launchpad.net/~fkrull/+archive/ubuntu/deadsnakes-python2.7">Python 2.7 Updates</a>,
which makes it straight&shy;for&shy;ward to upgrade to Python 2.7.11
on supported versions of Ubuntu.</p>
<pre class="code bash literal-block">
sudo<span class="w"> </span>apt-add-repository<span class="w"> </span>ppa:fkrull/deadsnakes-python2.7<span class="w">
</span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w">
</span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python2.7<span class="w"> </span>python2.7-dev
</pre>
<p>Be sure not to use Felix Krull's <a class="reference external" href="https://launchpad.net/~fkrull/+archive/ubuntu/deadsnakes">other Python PPA</a> by mistake.
I did that on a col&shy;league's machine yesterday.
In our attempts to figure out why we still had Python 2.7.6,
we managed to mess up the <span>&#8230;<a href="/blog/2016/01/16/InstallingPython2_7_11onUbuntu.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>,
                <a href="/tag/linux/" rel="tag">linux</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-15">2016-01-15</time>
        <h1>
            <a href="/blog/2016/01/15/DVINotConsideredEqual.html" rel="bookmark canonical">DVI Not Considered Equal</a>
        </h1>
    </header>
    <a class="reference external image-reference" href="https://en.wikipedia.org/wiki/Digital_Visual_Interface"></a>
<p>We got a new monitor today for one of our <a class="reference external" href="http://www.metabrite.com/devblog/posts/pairing-git/">pairing work&shy;sta&shy;tions</a>.
At 2560x1600, it was higher resolution than its pre&shy;de&shy;ces&shy;sor.
I dis&shy;con&shy;nect&shy;ed the <a class="reference external" href="https://en.wikipedia.org/wiki/Digital_Visual_Interface">DVI</a> cable from the old monitor,
leaving it connected to one of the video ports on the computer,
and connected it to the new monitor.
All I could see was static and noise on the screen.
After trying a variety of other things,
I eventually thought to use the DVI cable that came with the new monitor.
It worked!</p>
<p>I had assumed that all DVI cables were in&shy;ter&shy;change&shy;able.
Reading the <a class="reference external" href="https://en.wikipedia.org/wiki/Digital_Visual_Interface">Wikipedia article</a>, I see that at higher res&shy;o&shy;lu&shy;tions,
<em>dual link</em> is needed.
I hadn't known such a thing <span>&#8230;<a href="/blog/2016/01/15/DVINotConsideredEqual.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/tech/" rel="tag">tech</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-14">2016-01-14</time>
        <h1>
            <a href="/blog/2016/01/14/PythonBaseClassOrder.html" rel="bookmark canonical">Python Base Class Order</a>
        </h1>
    </header>
    <p>When I declare a derived class that inherits
from both a base class and some mixins,
I am always tempted to write:</p>
<pre class="code python literal-block">
<span class="k">class</span> <span class="nc">Derived</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">Mixin1</span><span class="p">,</span> <span class="n">Mixin2</span><span class="p">):</span><span class="w">
</span>    <span class="s2">&quot;Some class&quot;</span>
</pre>
<p>My reasoning is that <tt class="docutils literal">Derived</tt> is a <tt class="docutils literal">Base</tt>
with some <tt class="docutils literal">Mixin1</tt> and <tt class="docutils literal">Mixin2</tt> goodness sprinkled on.
Generally, that's fine.
The exception is when I want one of the mixins to override
a method or attribute that's defined in <tt class="docutils literal">Base</tt>.
Because the <a class="reference external" href="http://python-history.blogspot.com/2010/06/method-resolution-order.html">Method Resolution Order</a> is left-to-right,
then <tt class="docutils literal">Base</tt>'s im&shy;ple&shy;men&shy;ta&shy;tion will always be found first.</p>
<p>To get the desired behavior of the mixin overriding the base,
<tt class="docutils literal">Base</tt> should always appear <em>last</em> in the in&shy;her&shy;i&shy;tance list.</p>
<pre class="code python literal-block">
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="w">

</span><span class="k">class</span> <span class="nc">Useful</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span><span class="w">
</span>    </pre><span>&#8230;<a href="/blog/2016/01/14/PythonBaseClassOrder.html" class="continue">continue</a>.</span>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-12">2016-01-12</time>
        <h1>
            <a href="/blog/2016/01/12/BashGettingAndSettingDefaultValues.html" rel="bookmark canonical">Bash: Getting and Setting Default Values</a>
        </h1>
    </header>
    <p>Bash has some handy syntax for getting and setting default values.
Un&shy;for&shy;tu&shy;nate&shy;ly, it's a collection of punc&shy;tu&shy;a&shy;tion characters,
which makes it hard to Google when you can't quite remember the syntax.</p>
<p>Getting a default value using <tt class="docutils literal"><span class="pre">${var:-fallback}</span></tt>:</p>
<pre class="code bash literal-block">
<span class="c1"># set $LOGDIR to $1 if $1 has a value; otherwise set $LOGDIR to &quot;/var/log&quot;
</span><span class="nv">LOGDIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="p">/var/log</span><span class="si">}</span><span class="s2">&quot;</span><span class="w">

</span><span class="c1"># use $VERSION unless it's empty or unset; fall back to extracting someprog's version num
</span><span class="nv">build_version</span><span class="o">=</span><span class="si">${</span><span class="nv">VERSION</span><span class="k">:-$(</span>someprog<span class="w"> </span>--version<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">'s/[^0-9.]*\([0-9.]*\).*/\1/'</span><span class="k">)</span><span class="si">}</span>
</pre>
<p>The colon-dash con&shy;struc&shy;tion is known as the
<a class="reference external" href="https://en.wikipedia.org/wiki/Dog%27s_bollocks_(typography)">dog's bollocks</a>
in typography.</p>
<p>Setting a default value, using <tt class="docutils literal"><span class="pre">${var:=fallback}</span></tt>:</p>
<pre class="code bash literal-block">
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$HOME</span><span class="w">
</span>/Users/georgevreilly<span class="w">
</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="p">:=/tmp</span><span class="si">}</span><span class="w">
</span>/Users/georgevreilly<span class="w">
</span>$<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>HOME<span class="w">
</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="p">:=/tmp</span><span class="si">}</span><span class="w">
</span>/tmp<span class="w">
</span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$HOME</span><span class="w">
</span>/tmp<span class="w">
</span>$<span class="w"> </span>cd<span class="p">;</span><span class="w"> </span><span class="nb">pwd</span><span class="w">
</span>/tmp
</pre>
<p>Note: <tt class="docutils literal">:=</tt> uses the new value in two cases.
First, when <span>&#8230;<a href="/blog/2016/01/12/BashGettingAndSettingDefaultValues.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/bash/" rel="tag">bash</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
        <article>
    <header>
        <time datetime="2016-01-04">2016-01-04</time>
        <h1>
            <a href="/blog/2016/01/04/PythonObfuscateUrlPassword.html" rel="bookmark canonical">Obfuscating Passwords in URLs in Python</a>
        </h1>
    </header>
    <p></p>
<blockquote>
[Pre&shy;vi&shy;ous&shy;ly published at the now defunct <a class="reference external" href="https://web.archive.org/web/20171001220321/http://devblog.metabrite.com/">MetaBrite Dev Blog</a>.]</blockquote>
<p><a class="reference external" href="https://www.ietf.org/rfc/rfc1738.txt">RFC 1738</a> allows passwords in URLs,
in the form <tt class="docutils literal"><span class="pre">&lt;scheme&gt;://&lt;username&gt;:&lt;password&gt;&#64;&lt;host&gt;:&lt;port&gt;/&lt;url-path&gt;</span></tt>.
Although passwords are deprecated by <a class="reference external" href="https://www.ietf.org/rfc/rfc3986.txt">RFC 3986</a> and other newer RFCs,
it's oc&shy;ca&shy;sion&shy;al&shy;ly useful.
Several important packages in the Python world allow such URLs,
including <a class="reference external" href="https://www.sqlalchemy.org/">SQLAlchemy</a> (<tt class="docutils literal"><span class="pre">'post&shy;gresql://scott:tiger&#64;localhost:5432/my&shy;data&shy;base'</span></tt>)
and <a class="reference external" href="https://docs.celeryproject.org/en/stable/">Celery</a> (<tt class="docutils literal"><span class="pre">'amqp://guest:guest&#64;localhost:5672//'</span></tt>).
It's also useful to be able to log such URLs without exposing the password.</p>
<p>Python 2 has <a class="reference external" href="https://docs.python.org/2/library/urlparse.html#urlparse.urlparse">urlparse.urlparse</a>
(known as <a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlparse">urllib.parse.urlparse</a> in Python 3
and <tt class="docutils literal">six.moves.url&shy;lib_&shy;parse.urlparse</tt> in the <a class="reference external" href="https://six.readthedocs.io/">Six</a> com&shy;pat&shy;i&shy;bil&shy;i&shy;ty library)
to split a URL into six components,
<em>scheme</em>, <em>netloc</em>, <em>path</em>, <em>parameters</em>, <em>query</em>, and <em>fragment</em>.
The <em>netloc</em> cor&shy;re&shy;sponds to <tt class="docutils literal"><span class="pre">&lt;user&gt;:&lt;password&gt;&#64;&lt;host&gt;:&lt;port&gt;</span></tt>.</p>
<p>Un&shy;for&shy;tu&shy;nate&shy;ly, neither Python 2 nor 3's <tt class="docutils literal">urlparse</tt>
properly handle the <em>userinfo</em>
(<em>username</em> + optional <em>password</em> in the <em>netloc</em>),
as <span>&#8230;<a href="/blog/2016/01/04/PythonObfuscateUrlPassword.html" class="continue">continue</a>.</span></p>
    <footer>
        
        
            <p>tagged as
                <a href="/tag/python/" rel="tag">python</a>,
                <a href="/tag/urls/" rel="tag">urls</a>,
                <a href="/tag/metabrite/" rel="tag">metabrite</a>
                    and
                    
                <a href="/tag/til/" rel="tag">til</a>
                
            </p>
        
    </footer>
    <div class="comments"></div>
</article>


    
    
        <a href="/tag/til/7/" class="page floatright">
        Previous &raquo;
        </a>
    
    
        <a href="/tag/til/5/" class="page floatleft">
        &laquo; Next
        </a>
<footer>
    
    
    <p>written by <a href="mailto:george@reilly.org">George V. Reilly</a></p>
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="copyright license">
        <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="by-nc-sa" />
    </a>
    
    

  </footer>
</body>
</html>
